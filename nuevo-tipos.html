<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Nuevos Tipos de Datos en JavaScript</h1>

    <script>
        /***********************Symbols******************************/
        //los corchetes [ ] en JavaScript se utilizan para definir propiedades de objetos de manera dinámica 

        let id = Symbol("id")
        let id2 = Symbol("id2")

        console.log(id === id2)
        console.log(id, id2)
        console.log(typeof id, typeof id2)

        const NOMBRE = Symbol("nombre")
        const SALUDAR = Symbol("saludar")

        const persona = {
            [NOMBRE]: "jhonatan",
            APELLIDO: "yataco"
        }

        persona.SEGUNDONOMBRE = "Armando"
        console.log(persona)
        console.log(persona.SEGUNDONOMBRE)
        console.log(persona[NOMBRE])
        console.log(persona['APELLIDO'])

        persona[SALUDAR] = function () {
            console.log("hola")
        }

        console.log(persona)

        persona[SALUDAR]()

        for (let iterator in persona) {
            console.log(iterator)

        }


        /*nuevo tipo de dato Symbol*/
        //En JavaScript, Symbol es un tipo de dato primitivo introducido en ECMAScript 2015 (también conocido como ES6). 
        //Un símbolo es un valor único e inmutable que se puede utilizar como identificador de propiedad para los objetos. 
        //Los símbolos son útiles cuando deseas crear propiedades de objetos que sean verdaderamente únicas, evitando así colisiones de nombres de propiedades.

        const token = Symbol('token');

        const obj = {
            [token]: 46
        };


        obj[Symbol('token')] = 4

        console.log(obj)

        console.log(Symbol.hasInstance)
        console.log(Symbol.iterator)

        class Person {

            saludo() {
                let respuesta = "hola"
                return respuesta
            }
        }

        console.log(Person[Symbol.hasInstance](new Person))

        /***********************Set******************************/
        /*     
        En JavaScript, Set es una estructura de datos que te permite almacenar valores únicos de cualquier tipo, ya sean valores primitivos o referencias a objetos. Los elementos en un Set están todos garantizados de ser únicos, lo que significa que no puede haber duplicados dentro de un Set.
        Aquí hay algunas características importantes de Set:
        Valores únicos: Como se mencionó anteriormente, los Set solo pueden contener valores únicos. Si intentas agregar un valor que ya existe en el Set, no se añadirá una segunda vez.
        Iteración en orden de inserción: Los elementos en un Set se iteran en el orden en que fueron insertados.
        No indexado: A diferencia de los arrays, no puedes acceder a los elementos de un Set mediante un índice.
        No permite claves duplicadas: En un Set, las claves son los valores mismos, no puedes especificar una clave personalizada.
        Métodos para añadir, eliminar y comprobar la existencia de elementos: Los Set proporcionan métodos para añadir (add()), eliminar (delete()), y comprobar la existencia (has()) de elementos en la colección.
        */
        // size - Se usa para ver el tamaño de un Set a diferencia del arreglo que se usa length

        const set = new Set([1, 2, 3, 3, 4, 5, true, false, false, {}, {}, "hola", "Hola"])
        console.log(set)
        console.log(set.size)

        const set2 = new Set()
        set2.add(1)
        set2.add(2)
        set2.add(2)
        set2.add(4)
        set2.add(4)
        set2.add(true)
        set2.add(true)
        set2.add({})

        console.log(set)
        console.log("Recorriendo set con for of")

        for (let iterator of set) {
            console.log(iterator)
        }

        console.log("Recorriendo set2 con forEach")

        set2.forEach(item => console.log(item))

        console.log("Convirtiendo a array con Array.from() un Set")
        let arr = Array.from(set)
        console.log(arr)
        console.log(arr[4])
        console.log("Probando el metodo delete de Set")
        set2.delete(4)
        console.log(set2)
        console.log("Validando con el metodo has si se encuentra en el set")
        let validando = set2.has(2)
        console.log(validando)
        console.log("Usando el metodo clear que limpia el set")
        set2.clear()
        console.log(set2)

        /***********************Maps******************************/
        /*      
        En JavaScript, Map es una estructura de datos que almacena pares de clave-valor donde tanto las claves como los valores pueden ser de cualquier tipo, incluyendo objetos o cualquier tipo de dato primitivo. A diferencia de los objetos regulares en JavaScript, que solo pueden tener claves de tipo string o symbol, en un Map, las claves pueden ser de cualquier tipo de dato, lo que lo hace muy versátil y útil en muchas situaciones.
        Aquí hay algunas características importantes de Map:
        Pares clave-valor: Los Map almacenan datos en pares clave-valor, lo que significa que cada elemento en un Map consiste en una clave y su correspondiente valor asociado.
        Claves únicas: Cada clave en un Map es única; no puede haber duplicados de claves dentro de un mismo Map.
        Iteración en orden de inserción: Al igual que los Set, los elementos en un Map se iteran en el orden en que fueron insertados.
        Métodos para añadir, eliminar y comprobar la existencia de elementos: Los Map proporcionan métodos para añadir (set()), eliminar (delete()), y comprobar la existencia (has()) de pares clave-valor en la colección.
        Flexibilidad en el tipo de datos de las claves y los valores: Las claves y los valores pueden ser de cualquier tipo de datos, incluyendo objetos, arrays, funciones, números, strings, etc.
        */

        let mapa = new Map()
        mapa.set("nombre", "jhonatan")
        mapa.set(1, "jhonatan")
        mapa.set(false, "SMP")

        console.log("Imprimiendo el mapa")
        console.log(mapa)
        console.log("Para saber cuantos elementos tiene Map se usa 'size' al igual que en Set")
        console.log(mapa.size)
        console.log("El metodo para saber si existe la llave en Map es 'has' al igual que en Set")
        console.log(mapa.has('nombre'))
        console.log("Reescribiendo el valor de la clave 'nombre'")
        mapa.set("nombre", "armando")
        console.log(mapa.get("nombre"))
        console.log("Recorriendo el mapa con for of")
        for (const [clave,valor] of mapa) {
         
            console.log(`Llave: ${clave}, Valor: ${valor}`);
        }

        const mapa2 = new Map([
            ["nombre", "jhonatan"],
            ["edad", 7],
            ["distrito", "SMP"],
        ])
        console.log(mapa2)

        const llavesMapa2 = [...mapa2.keys()]
        const valoreMapa2 = [...mapa2.values()]

        console.log(llavesMapa2)
        console.log(valoreMapa2)

        //NOTA: Cuando se menciona que el constructor de Map espera un iterable, se refiere a que el argumento 
        //que se pasa al constructor debe ser una estructura de datos iterable, 
        //es decir, que se pueda recorrer secuencialmente.
        /*Un iterable es cualquier objeto que implemente el protocolo de iteración en JavaScript. Esto incluye arrays, cadenas de texto, objetos tipo Array (por ejemplo, NodeList, HTMLCollection), así como también objetos iterables definidos por el usuario (mediante el uso de métodos Symbol.iterator).*/
        
        /*keys(): Este es un método de los objetos Map que devuelve un objeto iterador que contiene las claves del mapa mapa2*/
        /*values(): Similar al método keys(), values() devuelve un nuevo objeto Iterator que contiene los valores del Map en el mismo orden que fueron insertados. También se utiliza el operador de propagación (...) para convertir este iterador en una matriz.*/

        /*************************************WeakSets & WeakMaps***************************************/
        console.log("WeakSets & WeakMaps")
        console.log("WeakSets")
        const ws = new WeakSet()

        let valor1 = {"valor":1}
        let valor2 = {"valor":2}
        let valor3 = {"valor":3}

        ws.add(valor1)
        ws.add(valor2)
        console.log("imprimiendo el WeakSet")
        console.log(ws)
        console.log("Usando el metodo 'has' de WeakSet")
        console.log(ws.has(valor1))
        console.log(ws.has(valor2))
        console.log(ws.has(valor3))
        console.log("Usando el metodo 'delete' de WeakSet")
        console.log(ws.delete(valor2))
        console.log(ws)
        ws.add(valor2)
        console.log(ws)

        console.log("WeakMaps")

        const wm = new WeakMap()
        let llave1 = {}
        let llave2 = {}
        let llave3 = {}

        wm.set(llave1,1)
        wm.set(llave2,2)
        console.log("imprimiendo el Weakmap")
        console.log(wm)


    </script>
</body>

</html>